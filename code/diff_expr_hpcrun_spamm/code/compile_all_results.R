##
# Compile the 1-row csv files generated by the spatial tests run on HPC
#

library('tidyverse')

fps = list.files('../results/', full.names=T)

df_ls = parallel::mclapply(fps, function(i){df_tmp=data.table::fread(i) %>% mutate(sample=as.character(sample))}, mc.cores=20)

df_tmp = do.call(bind_rows, df_ls)

write.csv(df_tmp, file='spatial_test_all_compiled.csv', row.names=F, quote=F)


